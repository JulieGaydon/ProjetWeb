{"ast":null,"code":"import _slicedToArray from \"/Users/camillelewden/Documents/FAC/L4/S6/Web/projetFinal/ProjetWeb/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n// import React, { Component } from 'react';\n// import FormAddMessage from './FormAddMessage';\n// import Message from './Message';\nimport axios from 'axios'; // import './ListeMessage.css';\n\nimport React, { useState, setPosts, useEffect } from 'react';\n\nfunction ListeMessage(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  useEffect(function () {\n    var p = _this.props.passerPseudo;\n    var instance = axios.create({\n      baseURL: 'http://localhost:4000/',\n      timeout: 1000,\n      headers: {\n        'X-Custom-Header': 'foobar'\n      }\n    });\n    instance.get('api/message/' + p).then(function (response) {\n      console.log(\"retourne :\", response.data);\n      setPosts(response.map(function (doc) {\n        return doc.data();\n      }));\n    }).catch(function (error) {\n      console.log(\"message pas bon\");\n      alert(error);\n      console.log(error);\n    });\n  }, []);\n} // class ListeMessage extends Component{\n//     constructor(props){\n//         super(props);\n//         // this.state = {ListeM : [{mess : \"Hello\"},{mess : \"How are you\"}]}\n//         this.state = {pseudo : \"\", message : []}\n//         // this.state = {ListeM : [], pseudo : \"\"}\n//         // console.log(\"pseudo LM : \",this.props.passerPseudo)\n//         this.handleChange = this.handleChange.bind(this);\n//         // this.setState(this.ListM = props.mess)\n//     }\n//     // componentDidMount(){\n//     //     this.setState({pseudo : this.props.passerPseudo})\n//     //     console.log(\"pseudo LM : \",this.state.pseudo)\n//     // }\n//     addMessage(m){\n//         console.log(\"addMessage\")\n//         this.setState({message : this.message.push(m)})\n//     }\n//     handleChange(p){\n//         // let p = this.props.passerPseudo\n//         console.log(\"pseudo ListeMessage p:\",p)\n//         this.setState({pseudo : p})\n//         console.log(\"pseudo ListeMessage state:\",this.state.pseudo)\n//     }\n//     componentDidMount(){\n//         console.log(\"useeffect\")\n//         let p = this.props.passerPseudo\n//         this.handleChange(p)\n//         const instance = axios.create({\n//             baseURL: 'http://localhost:4000/',\n//             timeout: 1000,\n//             headers: {'X-Custom-Header': 'foobar'}\n//         });\n//         const m = ''\n//         instance.get('api/message/'+p)\n//         // .then(function (response){\n//         .then(function (response){\n//             console.log(\"retourne :\",response.data)\n//             // this.addMessage(response.map(doc => doc.data()))\n//             m = (response.map(doc => doc.data()))\n//         })\n//         .catch(function (error){\n//             console.log(\"message pas bon\")\n//             alert(error)\n//             console.log(error)\n//         })\n//         this.setState({message : m})\n//     }\n//     // componentDidMount(){\n//     //     const instance = axios.create({\n//     //         baseURL: 'http://localhost:4000/',\n//     //         timeout: 1000,\n//     //         headers: {'X-Custom-Header': 'foobar'}\n//     //     });\n//     //     // instance.get('api/message/1')\n//     //     let p = this.props.passerPseudo\n//     //     // this.setState({pseudo : p})\n//     //     this.handleChange(p)\n//     //     // console.log(\"pseudo state :\", this.state.pseudo)\n//     //     // console.log(\"pseudo p listeM\",p)\n//     //     const tab = []\n//     //     // faire un get !\n//     //     // instance.put('api/message/pseudo',{Pseudo : p})\n//     //     console.log(\"pseudo p\",p)\n//     //     instance.get('api/message/'+p)\n//     //     .then(function (response){\n//     //         console.log(\"message okk tout est bon\")\n//     //         let i = 0\n//     //         // on recupere les messages\n//     //         console.log(\"resultat\",response.data)\n//     //         // on les ajoute a la liste\n//     //         // while(response.data[i] != undefined){\n//     //             // on insere le message dans la liste\n//     //             // console.log(\"mess\",response.data[i].message)\n//     //         //     tab.push(response.data[i])\n//     //         //     i = i+1\n//     //         // }\n//     //         tab.push(response.data)\n//     //         console.log(\"message CDM \",tab)\n//     //         alert(response)\n//     //     })\n//     //     .catch(function (error){\n//     //         console.log(\"message pas bon\")\n//     //         alert(error)\n//     //         console.log(error)\n//     //     })\n//     //     // console.log(\"tab 1\",tab)\n//     //     // on met a jour l'etat\n//     //     this.setState({ListeM : tab})\n//     // }\n//     render(){\n//         // console.log(\"this.state.listeM render\",this.state.ListeM)\n//             return(<div >\n//                 {/* {(this.state.ListeM).map(m =>( */}\n//                     {/* <Message mess = {m}/>\n//                 ))} */}\n//                  {/* <Message mess = {this.state.ListeM}/> */}\n//                 {this.state.message.map(post =>(\n//                     <Message pseudo = {post.pseudo} mess = {post.message}/>\n//                 ))}\n//                 </div>\n//             )\n//     }\n// }\n\n\nexport default ListeMessage;","map":{"version":3,"sources":["/Users/camillelewden/Documents/FAC/L4/S6/Web/projetFinal/ProjetWeb/src/ListeMessage.js"],"names":["axios","React","useState","setPosts","useEffect","ListeMessage","props","posts","p","passerPseudo","instance","create","baseURL","timeout","headers","get","then","response","console","log","data","map","doc","catch","error","alert"],"mappings":";AAAA;AACA;AACA;AACC,OAAOA,KAAP,MAAkB,OAAlB,C,CACD;;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAAyBC,QAAzB,EAAmCC,SAAnC,QAAoD,OAApD;;AAEA,SAASC,YAAT,CAAsBC,KAAtB,EAA4B;AAAA;;AAAA,kBACCJ,QAAQ,CAAC,EAAD,CADT;AAAA;AAAA,MAClBK,KADkB;AAAA,MACXJ,QADW;;AAGxBC,EAAAA,SAAS,CAAC,YAAI;AACV,QAAII,CAAC,GAAG,KAAI,CAACF,KAAL,CAAWG,YAAnB;AACA,QAAMC,QAAQ,GAAGV,KAAK,CAACW,MAAN,CAAa;AAC1BC,MAAAA,OAAO,EAAE,wBADiB;AAE1BC,MAAAA,OAAO,EAAE,IAFiB;AAG1BC,MAAAA,OAAO,EAAE;AAAC,2BAAmB;AAApB;AAHiB,KAAb,CAAjB;AAKAJ,IAAAA,QAAQ,CAACK,GAAT,CAAa,iBAAeP,CAA5B,EACCQ,IADD,CACM,UAAUC,QAAV,EAAmB;AACrBC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBF,QAAQ,CAACG,IAAlC;AACAjB,MAAAA,QAAQ,CAACc,QAAQ,CAACI,GAAT,CAAa,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACF,IAAJ,EAAJ;AAAA,OAAhB,CAAD,CAAR;AACH,KAJD,EAKCG,KALD,CAKO,UAAUC,KAAV,EAAgB;AACnBN,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAM,MAAAA,KAAK,CAACD,KAAD,CAAL;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACH,KATD;AAUH,GAjBQ,EAiBP,EAjBO,CAAT;AAkBH,C,CAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAenB,YAAf","sourcesContent":["// import React, { Component } from 'react';\n// import FormAddMessage from './FormAddMessage';\n// import Message from './Message';\n import axios from 'axios';\n// import './ListeMessage.css';\nimport React, { useState,setPosts, useEffect } from 'react';\n\nfunction ListeMessage(props){\n    const[posts, setPosts] = useState([]);\n\n    useEffect(()=>{\n        let p = this.props.passerPseudo\n        const instance = axios.create({\n            baseURL: 'http://localhost:4000/',\n            timeout: 1000,\n            headers: {'X-Custom-Header': 'foobar'}\n        });\n        instance.get('api/message/'+p)\n        .then(function (response){\n            console.log(\"retourne :\",response.data)\n            setPosts(response.map(doc => doc.data()))\n        })\n        .catch(function (error){\n            console.log(\"message pas bon\")\n            alert(error)\n            console.log(error)\n        })\n    },[])\n}\n\n\n// class ListeMessage extends Component{\n//     constructor(props){\n//         super(props);\n//         // this.state = {ListeM : [{mess : \"Hello\"},{mess : \"How are you\"}]}\n//         this.state = {pseudo : \"\", message : []}\n//         // this.state = {ListeM : [], pseudo : \"\"}\n//         // console.log(\"pseudo LM : \",this.props.passerPseudo)\n//         this.handleChange = this.handleChange.bind(this);\n//         // this.setState(this.ListM = props.mess)\n//     }\n\n//     // componentDidMount(){\n//     //     this.setState({pseudo : this.props.passerPseudo})\n//     //     console.log(\"pseudo LM : \",this.state.pseudo)\n//     // }\n\n//     addMessage(m){\n//         console.log(\"addMessage\")\n//         this.setState({message : this.message.push(m)})\n//     }\n\n//     handleChange(p){\n//         // let p = this.props.passerPseudo\n//         console.log(\"pseudo ListeMessage p:\",p)\n//         this.setState({pseudo : p})\n//         console.log(\"pseudo ListeMessage state:\",this.state.pseudo)\n//     }\n\n//     componentDidMount(){\n//         console.log(\"useeffect\")\n//         let p = this.props.passerPseudo\n//         this.handleChange(p)\n//         const instance = axios.create({\n//             baseURL: 'http://localhost:4000/',\n//             timeout: 1000,\n//             headers: {'X-Custom-Header': 'foobar'}\n//         });\n//         const m = ''\n//         instance.get('api/message/'+p)\n//         // .then(function (response){\n//         .then(function (response){\n//             console.log(\"retourne :\",response.data)\n//             // this.addMessage(response.map(doc => doc.data()))\n//             m = (response.map(doc => doc.data()))\n//         })\n//         .catch(function (error){\n//             console.log(\"message pas bon\")\n//             alert(error)\n//             console.log(error)\n//         })\n//         this.setState({message : m})\n//     }\n\n//     // componentDidMount(){\n//     //     const instance = axios.create({\n//     //         baseURL: 'http://localhost:4000/',\n//     //         timeout: 1000,\n//     //         headers: {'X-Custom-Header': 'foobar'}\n//     //     });\n//     //     // instance.get('api/message/1')\n//     //     let p = this.props.passerPseudo\n//     //     // this.setState({pseudo : p})\n//     //     this.handleChange(p)\n//     //     // console.log(\"pseudo state :\", this.state.pseudo)\n//     //     // console.log(\"pseudo p listeM\",p)\n//     //     const tab = []\n//     //     // faire un get !\n//     //     // instance.put('api/message/pseudo',{Pseudo : p})\n//     //     console.log(\"pseudo p\",p)\n//     //     instance.get('api/message/'+p)\n//     //     .then(function (response){\n//     //         console.log(\"message okk tout est bon\")\n//     //         let i = 0\n//     //         // on recupere les messages\n//     //         console.log(\"resultat\",response.data)\n//     //         // on les ajoute a la liste\n//     //         // while(response.data[i] != undefined){\n//     //             // on insere le message dans la liste\n//     //             // console.log(\"mess\",response.data[i].message)\n//     //         //     tab.push(response.data[i])\n//     //         //     i = i+1\n//     //         // }\n//     //         tab.push(response.data)\n//     //         console.log(\"message CDM \",tab)\n//     //         alert(response)\n//     //     })\n//     //     .catch(function (error){\n//     //         console.log(\"message pas bon\")\n//     //         alert(error)\n//     //         console.log(error)\n//     //     })\n//     //     // console.log(\"tab 1\",tab)\n//     //     // on met a jour l'etat\n//     //     this.setState({ListeM : tab})\n//     // }\n    \n//     render(){\n//         // console.log(\"this.state.listeM render\",this.state.ListeM)\n//             return(<div >\n//                 {/* {(this.state.ListeM).map(m =>( */}\n//                     {/* <Message mess = {m}/>\n//                 ))} */}\n//                  {/* <Message mess = {this.state.ListeM}/> */}\n//                 {this.state.message.map(post =>(\n//                     <Message pseudo = {post.pseudo} mess = {post.message}/>\n//                 ))}\n//                 </div>\n//             )\n//     }\n// }\n\nexport default ListeMessage;"]},"metadata":{},"sourceType":"module"}