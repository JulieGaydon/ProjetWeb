{"ast":null,"code":"import _slicedToArray from \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/Recherche.js\";\nimport React, { useState } from 'react';\nimport Message from './Message';\nimport './Recherche.css';\nimport axios from 'axios';\n\nfunction Recherche(_ref) {\n  var PPpseudo = _ref.PPpseudo,\n      setClic = _ref.setClic;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      rechercheU = _useState2[0],\n      setRechercheU = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      posts = _useState4[0],\n      setPosts = _useState4[1];\n\n  var sauv = [];\n\n  var rechercher = function rechercher(e) {\n    e.preventDefault();\n    var p = {\n      PPpseudo: PPpseudo\n    };\n    var instance = axios.create({\n      baseURL: 'http://localhost:4000/',\n      timeout: 1000,\n      headers: {\n        'X-Custom-Header': 'foobar'\n      }\n    });\n    var i = 0;\n    sauv = [];\n    instance.get('api/message/All/' + p.PPpseudo).then(function (response) {\n      console.log(\"retourne rechercher all :\", response.data);\n\n      while (response.data[i] != undefined) {\n        var mess = response.data[i].message;\n        var index = mess.indexOf(rechercheU);\n\n        if (index !== -1) {\n          sauv.push(response.data[i]);\n          setPosts(sauv.map(function (doc) {\n            return doc;\n          }));\n          console.log(\"liste posts\", posts);\n        } else {\n          console.log(\"La sous-chaîne n'existe pas!\");\n        }\n\n        i = i + 1;\n      }\n\n      alert(\"fin while\");\n    }).catch(function (error) {\n      console.log(\"message pas bon\");\n      alert(error);\n      console.log(error);\n    });\n    alert(\"fin fonction\");\n  };\n\n  return React.createElement(\"form\", {\n    id: \"BarreRecherche\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setRechercheU(e.target.value);\n    },\n    id: \"inputRecherche\",\n    value: rechercheU,\n    placeholder: \"Rechercher\",\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: rechercher,\n    type: \"submit\",\n    id: \"boutonRecherche\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Rechercher\")), React.createElement(\"div\", {\n    id: \"retourneM\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, posts.map(function (post) {\n    return React.createElement(Message, {\n      key: post._id,\n      pseudo: post.pseudo,\n      message: post.message,\n      date: post.date,\n      setClic: setClic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    });\n  })));\n}\n\nexport default Recherche;","map":{"version":3,"sources":["/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/Recherche.js"],"names":["React","useState","Message","axios","Recherche","PPpseudo","setClic","rechercheU","setRechercheU","posts","setPosts","sauv","rechercher","e","preventDefault","p","instance","create","baseURL","timeout","headers","i","get","then","response","console","log","data","undefined","mess","message","index","indexOf","push","map","doc","alert","catch","error","target","value","post","_id","pseudo","date"],"mappings":"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","sourcesContent":["import React, { useState} from 'react';\nimport Message from './Message';\nimport './Recherche.css';\nimport axios from 'axios';\n\nfunction Recherche({PPpseudo, setClic}){\n    const[rechercheU, setRechercheU] = useState(\"\");\n    const[posts, setPosts] = useState([]);\n    let sauv = []\n\n    const rechercher =(e) =>{\n        e.preventDefault();\n        let p = {PPpseudo}\n        const instance = axios.create({\n            baseURL: 'http://localhost:4000/',\n            timeout: 1000,\n            headers: {'X-Custom-Header': 'foobar'}\n        });\n        let i = 0\n        sauv = []\n        instance.get('api/message/All/'+p.PPpseudo)\n        .then(function (response){\n            console.log(\"retourne rechercher all :\",response.data)\n            while(response.data[i] != undefined){\n                var mess = response.data[i].message\n                var index = mess.indexOf(rechercheU)\n                if(index !== -1){\n                    sauv.push(response.data[i])\n                    setPosts(sauv.map((doc)=>doc))\n                    console.log(\"liste posts\",posts)\n                } else{\n                    console.log(\"La sous-chaîne n'existe pas!\");\n                }\n                i = i+1\n            }\n            alert(\"fin while\")\n        })\n        .catch(function (error){\n            console.log(\"message pas bon\")\n            alert(error)\n            console.log(error)\n        })\n        alert(\"fin fonction\")\n    }\n\n    return (\n        \n            <form id=\"BarreRecherche\">\n                <div id=\"message\">\n                    <input onChange={(e) => setRechercheU(e.target.value)} id = \"inputRecherche\" value={rechercheU} placeholder=\"Rechercher\" type=\"text\"/>\n                    <button onClick={rechercher} type=\"submit\"  id = \"boutonRecherche\">Rechercher</button>\n                </div>\n\n                <div id=\"retourneM\">\n                    {posts.map((post) => (\n                        <Message key = {post._id} pseudo = {post.pseudo} message = {post.message} date = {post.date} setClic= {setClic}/>\n                        ))}\n                </div>\n            </form>\n        \n        )\n    }\n\nexport default Recherche;"]},"metadata":{},"sourceType":"module"}