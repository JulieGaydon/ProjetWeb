{"ast":null,"code":"import _slicedToArray from \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/Recherche.js\";\nimport React, { useState } from 'react';\nimport ListeMessage from './ListeMessage';\nimport MurDeTweetsF from './MurDeTweets';\nimport './recherche.css';\nimport axios from 'axios';\n\nfunction Recherche(_ref) {\n  var PPpseudo = _ref.PPpseudo;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      rechercheU = _useState2[0],\n      setRechercheU = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      posts = _useState4[0],\n      setPosts = _useState4[1];\n\n  var rechercher = function rechercher() {\n    var p = {\n      PPpseudo: PPpseudo\n    };\n    console.log(\"PPp: \", PPpseudo);\n    setPseudo(p.PPpseudo);\n    var instance = axios.create({\n      baseURL: 'http://localhost:4000/',\n      timeout: 1000,\n      headers: {\n        'X-Custom-Header': 'foobar'\n      }\n    });\n    instance.get('api/message/All/' + p.PPpseudo).then(function (response) {\n      //response.data liste de tous les messages\n      console.log(\"retourne rechercher all :\", response.data); //doc = 1message\n\n      var mess = response.data[0].message;\n      var index = str.indexOf(rechercheU);\n\n      if (index !== -1) {\n        alert(\"La sous-chaîne existe!\");\n        setPosts(response.data.map(function (doc) {\n          return doc;\n        }));\n      } else {\n        alert(\"La sous-chaîne n'existe pas!\");\n      }\n    }).catch(function (error) {\n      console.log(\"message pas bon\");\n      alert(error);\n      console.log(error);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    id: \"MurDeTweets\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    id: \"BarreRecherche\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    id: \"recherIn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"inputM\",\n    onChange: function onChange(m) {\n      return setRechercheU(m.target.value);\n    },\n    value: rechercheU,\n    placeholder: \"chercher des abonn\\xE9s\",\n    name: \"recherche\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"button\",\n    id: \"rech\",\n    onClick: rechercher,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Recherche\"))), React.createElement(\"div\", {\n    id: \"messM\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, posts.map(function (post) {\n    return React.createElement(Message, {\n      key: post._id,\n      pseudo: post.pseudo,\n      message: post.message,\n      date: post.date,\n      setClic: setClic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    });\n  })));\n}\n\nexport default Recherche;","map":{"version":3,"sources":["/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/Recherche.js"],"names":["React","useState","ListeMessage","MurDeTweetsF","axios","Recherche","PPpseudo","rechercheU","setRechercheU","posts","setPosts","rechercher","p","console","log","setPseudo","instance","create","baseURL","timeout","headers","get","then","response","data","mess","message","index","str","indexOf","alert","map","doc","catch","error","m","target","value","post","_id","pseudo","date","setClic"],"mappings":"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","sourcesContent":["import React, { useState} from 'react';\nimport ListeMessage from './ListeMessage';\nimport MurDeTweetsF from './MurDeTweets';\nimport './recherche.css';\nimport axios from 'axios';\n\nfunction Recherche({PPpseudo}){\n    const[rechercheU, setRechercheU] = useState(\"\");\n    const[posts, setPosts] = useState([]);\n\n    const rechercher =() =>{\n        let p = {PPpseudo}\n        console.log(\"PPp: \",PPpseudo)\n        setPseudo(p.PPpseudo)\n        const instance = axios.create({\n            baseURL: 'http://localhost:4000/',\n            timeout: 1000,\n            headers: {'X-Custom-Header': 'foobar'}\n        });\n        instance.get('api/message/All/'+p.PPpseudo)\n        .then(function (response){\n            //response.data liste de tous les messages\n            console.log(\"retourne rechercher all :\",response.data)\n            //doc = 1message\n            var mess = response.data[0].message\n            var index = str.indexOf(rechercheU)\n            if(index !== -1){\n                alert(\"La sous-chaîne existe!\");\n                setPosts(response.data.map((doc) => doc))\n            } else{\n                alert(\"La sous-chaîne n'existe pas!\");\n            }\n        })\n        .catch(function (error){\n            console.log(\"message pas bon\")\n            alert(error)\n            console.log(error)\n        })\n    }\n\n    return (\n        <div id = \"MurDeTweets\">\n            <form id=\"BarreRecherche\">\n                <div id=\"message\">\n                    <label id = \"recherIn\"></label><input type = \"text\" id = \"inputM\" onChange={m => setRechercheU(m.target.value)} value = {rechercheU} placeholder='chercher des abonnés' name = \"recherche\" ></input>\n                    <button className = \"button\" id = \"rech\"  onClick={rechercher}>Recherche</button>\n                </div>\n            </form>\n\n            <div id=\"messM\">\n            {/* <ListeMessage passerPseudo = {PPpseudo} tousMessages = {true}/> */}\n            {posts.map((post) => (\n                <Message key = {post._id} pseudo = {post.pseudo} message = {post.message} date = {post.date} setClic= {setClic}/>\n            ))}\n            </div>\n        </div>\n        )\n    }\n\nexport default Recherche;"]},"metadata":{},"sourceType":"module"}