{"ast":null,"code":"import _slicedToArray from \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/ProfilAmi.js\";\nimport React, { useEffect, useState } from 'react';\nimport Message from './Message';\nimport axios from 'axios';\nimport Logout from './Logout';\nimport './Profil.css';\nimport FormAddMessage from './FormAddMessage';\nimport ProfilModif from './ProfilModif';\nimport MurDeTweets from './MurDeTweets';\n\nfunction ProfilAmi(_ref) {\n  var CallBackChangeEtat = _ref.CallBackChangeEtat,\n      PPpseudo = _ref.PPpseudo;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pseudo = _useState4[0],\n      setPseudo = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      mdt = _useState6[0],\n      setMur = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      Pami = _useState8[0],\n      addAmi = _useState8[1];\n\n  var ajouter = function ajouter(a) {\n    var instance = axios.create({\n      baseURL: 'http://localhost:4000/',\n      timeout: 5000,\n      headers: {\n        'X-Custom-Header': 'foobar'\n      }\n    });\n    var p = {\n      passerPseudo: passerPseudo\n    };\n    console.log(\"form: \", message);\n    instance.put('api/message', {\n      Pseudo: p.passerPseudo,\n      message: message\n    }).then(function (response) {\n      console.log(\"resultat\", response);\n      alert(response);\n    }).catch(function (error) {\n      console.log(error);\n      alert(\"error\", error);\n    });\n  };\n\n  useEffect(function () {\n    var p = {\n      PPpseudo: PPpseudo\n    };\n    console.log(\"PPp: \", PPpseudo);\n    setPseudo(p.PPpseudo);\n    var instance = axios.create({\n      baseURL: 'http://localhost:4000/',\n      timeout: 1000,\n      headers: {\n        'X-Custom-Header': 'foobar'\n      }\n    });\n    instance.get('api/message/' + p.PPpseudo).then(function (response) {\n      //response.data liste de tous les messages\n      console.log(\"retourne :\", response.data); //doc = 1message\n\n      setPosts(response.data.map(function (doc) {\n        return doc;\n      }));\n    }).catch(function (error) {\n      console.log(\"message pas bon\");\n      alert(error);\n      console.log(error);\n    });\n  }, []);\n\n  if (mdt == true) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(MurDeTweets, {\n      CallBackChangeEtat: CallBackChangeEtat,\n      PPpseudo: pseudo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }));\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      id: \"Profil\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"enteteP\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      id: \"bouttonMdT\",\n      onClick: function onClick() {\n        return setMur(true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Mur\"), React.createElement(\"button\", {\n      type: \"button\",\n      id: \"bouttonProfil\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Abonnement\"), React.createElement(\"button\", {\n      type: \"button\",\n      id: \"bouttonProfil\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Abonnes\"), React.createElement(Logout, {\n      CallBackChangeEtat: CallBackChangeEtat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"Abo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"liste Abonnes\")), React.createElement(\"div\", {\n      id: \"mess\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(FormAddMessage, {\n      passerPseudo: pseudo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), console.log(\"post:\", posts), posts.map(function (post) {\n      return React.createElement(Message, {\n        key: post._id,\n        pseudo: post.pseudo,\n        message: post.message,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      });\n    })), React.createElement(\"div\", {\n      id: \"infoP\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      id: \"bouttonProfil\",\n      onClick: ajouter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Ajouter\"))));\n  }\n}\n\nexport default ProfilAmi;","map":{"version":3,"sources":["/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/ProfilAmi.js"],"names":["React","useEffect","useState","Message","axios","Logout","FormAddMessage","ProfilModif","MurDeTweets","ProfilAmi","CallBackChangeEtat","PPpseudo","posts","setPosts","pseudo","setPseudo","mdt","setMur","Pami","addAmi","ajouter","a","instance","create","baseURL","timeout","headers","p","passerPseudo","console","log","message","put","Pseudo","then","response","alert","catch","error","get","data","map","doc","post","_id"],"mappings":"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","sourcesContent":["import React, { useEffect ,useState } from 'react';\nimport Message from './Message';\nimport axios from 'axios';\nimport Logout from './Logout';\nimport './Profil.css';\nimport FormAddMessage from './FormAddMessage';\nimport ProfilModif from './ProfilModif'\nimport MurDeTweets from './MurDeTweets';\n\nfunction ProfilAmi ({CallBackChangeEtat, PPpseudo}){\n    const[posts, setPosts] = useState([]);\n    const[pseudo, setPseudo] = useState([]);\n    const[mdt, setMur] = useState(false);\n    const[Pami, addAmi] = useState([]);\n\n    const ajouter =(a) =>{\n        const instance = axios.create({\n        baseURL: 'http://localhost:4000/',\n        timeout: 5000,\n        headers: {'X-Custom-Header': 'foobar'}\n        });\n        let p = {passerPseudo}\n        console.log(\"form: \" ,message)\n        instance.put('api/message',{Pseudo : p.passerPseudo, message : message})\n        .then(function (response){\n            console.log(\"resultat\",response)\n            alert(response)\n        })\n        .catch(function (error){\n            console.log(error)\n            alert(\"error\",error)\n        })\n    }\n\n    useEffect(()=>{\n        let p = {PPpseudo}\n        console.log(\"PPp: \",PPpseudo)\n        setPseudo(p.PPpseudo)\n        const instance = axios.create({\n            baseURL: 'http://localhost:4000/',\n            timeout: 1000,\n            headers: {'X-Custom-Header': 'foobar'}\n        });\n        instance.get('api/message/'+p.PPpseudo)\n        .then(function (response){\n            //response.data liste de tous les messages\n            console.log(\"retourne :\",response.data)\n            //doc = 1message\n            setPosts(response.data.map((doc) => doc))\n        })\n        .catch(function (error){\n            console.log(\"message pas bon\")\n            alert(error)\n            console.log(error)\n        })\n    },[])\n\n    if (mdt == true){\n        return(\n            <div>\n               <MurDeTweets CallBackChangeEtat = {CallBackChangeEtat} PPpseudo = {pseudo}/>\n            </div>\n        )\n    }\n    else{\n        return(<div>\n            <fieldset id = \"Profil\">\n                <div id=\"enteteP\">\n                    <button type=\"button\" id = \"bouttonMdT\" onClick={()=>setMur(true)}>Mur</button>\n                    <button type = \"button\" id = \"bouttonProfil\">Abonnement</button>\n                    <button type = \"button\" id = \"bouttonProfil\">Abonnes</button>\n                    <Logout CallBackChangeEtat = {CallBackChangeEtat}/>\n                </div> \n                <div id=\"Abo\">\n                    <p>liste Abonnes</p>\n                </div>\n                <div id=\"mess\">\n                <FormAddMessage passerPseudo = {pseudo}/>\n                        {/* <ListeMessage passerPseudo = {PPpseudo} tousMessages = {true}/> */}\n                        {console.log(\"post:\",posts)}\n                        {posts.map((post) => (\n                            <Message key = {post._id} pseudo = {post.pseudo} message = {post.message} />\n                        ))}\n                </div>\n                <div id=\"infoP\">\n                    <button type = \"button\" id = \"bouttonProfil\" onClick={ajouter}>Ajouter</button>\n                </div>\n                        \n            </fieldset>\n            </div>\n            )\n    }\n}\n\nexport default ProfilAmi;"]},"metadata":{},"sourceType":"module"}