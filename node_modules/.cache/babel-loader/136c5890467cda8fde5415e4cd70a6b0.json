{"ast":null,"code":"import _slicedToArray from \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/MurDeTweets.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport FormAddMessage from './FormAddMessage';\nimport ListeMessage from './ListeMessage';\nimport Profil from './Profil';\nimport ProfilAmi from './ProfilAmi';\nimport Logout from './Logout';\nimport Recherche from './Recherche';\nimport './MurDeTweets.css';\nimport Message from './Message';\n\nfunction MurDeTweets(_ref) {\n  var CallBackChangeEtat = _ref.CallBackChangeEtat,\n      PPpseudo = _ref.PPpseudo;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1]; // si false -> mur tweet , true -> profil\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      profil = _useState4[0],\n      setProfil = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      clicProfil = _useState6[0],\n      setClic = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      pppseudo = _useState8[0],\n      setPseudo = _useState8[1];\n\n  useEffect(function () {\n    var p = {\n      PPpseudo: PPpseudo\n    };\n    console.log(\"PPp: \", PPpseudo);\n    setPseudo(p.PPpseudo);\n    var instance = axios.create({\n      baseURL: 'http://localhost:4000/',\n      timeout: 1000,\n      headers: {\n        'X-Custom-Header': 'foobar'\n      }\n    });\n    instance.get('api/message/All/' + p.PPpseudo).then(function (response) {\n      //response.data liste de tous les messages\n      console.log(\"retourne :\", response.data); //doc = 1message\n\n      setPosts(response.data.map(function (doc) {\n        return doc;\n      }));\n    }).catch(function (error) {\n      console.log(\"message pas bon\");\n      alert(error);\n      console.log(error);\n    });\n  }, []);\n  console.log(\"clic :\", clicProfil, profil, pppseudo);\n\n  if (clicProfil != pseudo && clicProfil != \"\") {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(ProfilAmi, {\n      CallBackChangeEtat: CallBackChangeEtat,\n      PPpseudo: clicProfil,\n      pseudoConnecte: pseudo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }));\n  } else if (profil === true || clicProfil == pseudo && pseudo != \"\") {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(Profil, {\n      CallBackChangeEtat: CallBackChangeEtat,\n      PPpseudo: pppseudo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }));\n  } else {\n    return React.createElement(\"div\", {\n      id: \"MurDeTweets\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"enteteM\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      id: \"bouttonMdT\",\n      onClick: function onClick() {\n        return setProfil(true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Profil\"), React.createElement(Logout, {\n      CallBackChangeEtat: CallBackChangeEtat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"recherche\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Recherche, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"messM\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(FormAddMessage, {\n      passerPseudo: pseudo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), console.log(\"post:\", posts), posts.map(function (post) {\n      return React.createElement(Message, {\n        key: post._id,\n        pseudo: post.pseudo,\n        message: post.message,\n        setClic: setClic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      });\n    })));\n  }\n\n  {\n    /*on aura une barre de recherche pour chercher des personnes et il faut rajouter des choses*/\n  }\n} // class MurDeTweets extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {afficheP : false, ecrireM : false}\n//         // props.addMessage({m : \"TestMessage\"})\n//         // this.processNewMessage= this.processNewMessage.bind(this)\n//         this.afficheProfil= this.afficheProfil.bind(this)\n//         // this.ecrireMessage= this.ecrireMessage.bind(this)\n//     }\n//     // processNewMessage(m){\n//     //     this.setState((state)=>{state.ListeM.push(m);\n//     //     return state;})\n//     // }\n//     afficheProfil(value){\n//         this.setState({afficheP : value});\n//         return this.state;\n//     }\n//     ecrireMessage(value){\n//         this.setState({ecrireM : value});\n//         return this.state;\n//     }\n//     render(){\n//         if(this.state.afficheP === true){\n//             return (<div className = \"Profil\">\n//                 {<Profil passerPseudo = {this.props.PPpseudo} CallBackChangeEtat = {this.props.CallBackChangeEtat} CallBackAfficheProfil = {this.afficheProfil}/>}\n//             </div>);\n//         }\n//         // if(this.state.ecrireM === true){\n//         //     return (<div className = \"FormAddMessage\">\n//         //         {<FormAddMessage CallBackEcrireMessage = {this.ecrireMessage}/>}\n//         //     </div>);\n//         // }\n//         else{\n//             return(\n//                 <fieldset id = \"MurDeTweets\">\n//                     <div id=\"enteteM\">\n//                         <button type=\"button\" id = \"bouttonMdT\" onClick={()=>this.afficheProfil(true)}>Profil</button>\n//                         <Logout CallBackChangeEtat = {this.props.CallBackChangeEtat} />\n//                     </div>\n//                     <div id=\"recherche\">\n//                         <Recherche/>\n//                     </div>\n//                     <div id=\"messM\">\n//                         <FormAddMessage passerPseudo = {this.props.PPpseudo}/>\n//                         <ListeMessage passerPseudo = {this.props.PPpseudo} tousMessages = {true}/>\n//                     </div>\n//                     <div id=\"question\">\n//                     </div>\n//                 </fieldset>\n//                 )\n//         }\n//     }\n// }\n\n\nexport default MurDeTweets;","map":{"version":3,"sources":["/home/julie/Documents/Julie/L3Info/Web/ProjetWeb/src/MurDeTweets.js"],"names":["React","useEffect","useState","axios","FormAddMessage","ListeMessage","Profil","ProfilAmi","Logout","Recherche","Message","MurDeTweets","CallBackChangeEtat","PPpseudo","posts","setPosts","profil","setProfil","clicProfil","setClic","pppseudo","setPseudo","p","console","log","instance","create","baseURL","timeout","headers","get","then","response","data","map","doc","catch","error","alert","pseudo","post","_id","message"],"mappings":"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","sourcesContent":["import React, { useEffect ,useState } from 'react';\nimport axios from 'axios';\nimport FormAddMessage from './FormAddMessage';\nimport ListeMessage from './ListeMessage';\nimport Profil from './Profil';\nimport ProfilAmi from './ProfilAmi';\nimport Logout from './Logout';\nimport Recherche from './Recherche';\nimport './MurDeTweets.css';\nimport Message from './Message';\n\nfunction MurDeTweets ({CallBackChangeEtat, PPpseudo}){\n    const[posts, setPosts] = useState([]);\n    // si false -> mur tweet , true -> profil\n    const[profil, setProfil] = useState(false);\n    const[clicProfil, setClic] = useState(\"\");\n    const[pppseudo, setPseudo] = useState(\"\");\n\n    useEffect(()=>{\n        let p = {PPpseudo}\n        console.log(\"PPp: \",PPpseudo)\n        setPseudo(p.PPpseudo)\n        const instance = axios.create({\n            baseURL: 'http://localhost:4000/',\n            timeout: 1000,\n            headers: {'X-Custom-Header': 'foobar'}\n        });\n        instance.get('api/message/All/'+p.PPpseudo)\n        .then(function (response){\n            //response.data liste de tous les messages\n            console.log(\"retourne :\",response.data)\n            //doc = 1message\n            setPosts(response.data.map((doc) => doc))\n        })\n        .catch(function (error){\n            console.log(\"message pas bon\")\n            alert(error)\n            console.log(error)\n        })\n    },[])\n    \n    console.log(\"clic :\",clicProfil, profil, pppseudo)\n        if(clicProfil != pseudo && clicProfil != \"\"){\n            return(\n                <div>\n                <ProfilAmi CallBackChangeEtat = {CallBackChangeEtat} PPpseudo = {clicProfil} pseudoConnecte = {pseudo}/>\n                </div>\n            )\n        }\n        else if (profil === true ||( clicProfil == pseudo && pseudo != \"\")){\n            return(\n                <div>\n                   <Profil CallBackChangeEtat = {CallBackChangeEtat} PPpseudo = {pppseudo}/>\n                </div>\n            )\n        }\n        else{\n            return(\n                <div id = \"MurDeTweets\">\n                <div id=\"enteteM\">\n                    <button type=\"button\" id = \"bouttonMdT\" onClick={()=>setProfil(true)}>Profil</button>\n                    <Logout CallBackChangeEtat = {CallBackChangeEtat} />                     \n                </div>\n            \n                <div id=\"recherche\">\n                    <Recherche/>\n                </div>\n                \n                <div id=\"messM\">\n                    <FormAddMessage passerPseudo = {pseudo}/>\n                    {/* <ListeMessage passerPseudo = {PPpseudo} tousMessages = {true}/> */}\n                    {console.log(\"post:\",posts)}\n                    {posts.map((post) => (\n                        <Message key = {post._id} pseudo = {post.pseudo} message = {post.message} setClic= {setClic}/>\n                    ))}\n\n                </div>\n            </div>)\n            \n        }\n            {/*on aura une barre de recherche pour chercher des personnes et il faut rajouter des choses*/}\n           \n        \n  }\n// class MurDeTweets extends Component{\n//     constructor(props){\n//         super(props);\n//         this.state = {afficheP : false, ecrireM : false}\n//         // props.addMessage({m : \"TestMessage\"})\n//         // this.processNewMessage= this.processNewMessage.bind(this)\n//         this.afficheProfil= this.afficheProfil.bind(this)\n//         // this.ecrireMessage= this.ecrireMessage.bind(this)\n//     }\n\n//     // processNewMessage(m){\n//     //     this.setState((state)=>{state.ListeM.push(m);\n//     //     return state;})\n//     // }\n\n//     afficheProfil(value){\n//         this.setState({afficheP : value});\n//         return this.state;\n//     }\n\n//     ecrireMessage(value){\n//         this.setState({ecrireM : value});\n//         return this.state;\n//     }\n\n//     render(){\n//         if(this.state.afficheP === true){\n//             return (<div className = \"Profil\">\n//                 {<Profil passerPseudo = {this.props.PPpseudo} CallBackChangeEtat = {this.props.CallBackChangeEtat} CallBackAfficheProfil = {this.afficheProfil}/>}\n//             </div>);\n//         }\n//         // if(this.state.ecrireM === true){\n//         //     return (<div className = \"FormAddMessage\">\n//         //         {<FormAddMessage CallBackEcrireMessage = {this.ecrireMessage}/>}\n//         //     </div>);\n//         // }\n//         else{\n//             return(\n//                 <fieldset id = \"MurDeTweets\">\n//                     <div id=\"enteteM\">\n//                         <button type=\"button\" id = \"bouttonMdT\" onClick={()=>this.afficheProfil(true)}>Profil</button>\n//                         <Logout CallBackChangeEtat = {this.props.CallBackChangeEtat} />\n//                     </div>\n//                     <div id=\"recherche\">\n//                         <Recherche/>\n//                     </div>\n//                     <div id=\"messM\">\n//                         <FormAddMessage passerPseudo = {this.props.PPpseudo}/>\n//                         <ListeMessage passerPseudo = {this.props.PPpseudo} tousMessages = {true}/>\n//                     </div>\n//                     <div id=\"question\">\n\n//                     </div>\n//                 </fieldset>\n\n                    \n//                 )\n//         }\n//     }\n// }\n\nexport default MurDeTweets;"]},"metadata":{},"sourceType":"module"}